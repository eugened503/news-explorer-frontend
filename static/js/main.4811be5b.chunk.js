(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),o=n(20),r=n.n(o),i=(n(31),n(18)),l=n(2),u=n(4),d=s.a.createContext(),j=n(3);var _=function(e){var t=Object(u.h)().pathname,n="".concat(e.isMenuCloseBtn?"":"menu__item_visible"),c="".concat("/saved-news"===t?"menu__icon-mobile-black":""),s="".concat("/saved-news"===t?"menu__item-color":""),o="".concat("/saved-news"===t?"menu__button-save":"menu__button-nav"),r="".concat("/saved-news"===t?"menu__text-decoration-save":"");return Object(a.jsxs)("div",{className:"menu menu_margin",children:[Object(a.jsx)("div",{className:"menu__icon-mobile ".concat(n," ").concat(c),onClick:e.openMenuMobile}),Object(a.jsx)(j.b,{to:"/",className:"menu__item menu__text-decoration menu__item_margin menu__item-mobile ".concat(s),children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e.isMenu&&"/saved-news"!==t?Object(a.jsx)("button",{type:"button",className:"menu__item menu__button menu__button-auth_width menu__button_margin menu__item-mobile ","aria-label":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onClick:e.onLogin,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.b,{to:"/saved-news",className:"menu__item menu__item_color ".concat(r," ").concat(s),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(a.jsx)(j.b,{to:"/",className:"menu__item menu__button menu__button_width menu__button-save_margin menu__button-top\n            ".concat(o),"aria-label":"\u0412\u044b\u0439\u0442\u0438",onClick:e.leavePage,children:e.userData.name})]})]})};var b=function(e){var t=Object(u.h)().pathname,n="".concat("/saved-news"===t?"menu__item-color":"");return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)(j.b,{to:"/",className:"header__explorer ".concat(n),children:"NewsExplorer"}),Object(a.jsx)(_,{userData:e.userData,openMenuMobile:e.onOpenMenuMobile,isMenu:e.isMenu,onSignOut:function(){e.onEditReg()},onLogin:e.onEditLogin,isMenuCloseBtn:e.isMenuCloseBtn,leavePage:e.leavePage})]})};var m=function(e){var t=s.a.useState(""),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(a.jsxs)("section",{className:"cover",children:[Object(a.jsx)("div",{className:"cover__image"}),Object(a.jsxs)("form",{className:"cover__search",children:[Object(a.jsx)("h2",{className:"cover-title",children:"\u0427\u0442\u043e \u0442\u0432\u043e\u0440\u0438\u0442\u0441\u044f \u0432 \u043c\u0438\u0440\u0435?"}),Object(a.jsx)("p",{className:"cover-subtitle",children:"\u041d\u0430\u0445\u043e\u0434\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0442\u0435\u043c\u0443 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0432 \u0441\u0432\u043e\u0451\u043c\xa0\u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435."}),Object(a.jsxs)("div",{className:"input__container",children:[Object(a.jsx)("input",{type:"text",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",className:"input__text",onChange:function(e){o(e.target.value)}}),Object(a.jsx)("button",{type:"button",className:"search__button","aria-label":"\u043f\u043e\u0438\u0441\u043a",onClick:function(t){t.preventDefault(),e.resetCards(),e.onGetServerCards(c)},children:"\u0418\u0441\u043a\u0430\u0442\u044c"})]}),e.searchError&&Object(a.jsx)("div",{className:"search__mistake",children:e.searchError})]})]})},h=["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"],g="https://api.news-line.students.nomoreparties.xyz";function p(e){var t=e.getDate().toString().padStart(2,"0"),n=(1+e.getMonth()).toString().padStart(2,"0"),a=e.getFullYear();return"".concat(a,"-").concat(n,"-").concat(t)}var O={articleDateFormatter:function(e){var t=e.getFullYear(),n=e.getMonth(),a=e.getDate();return"".concat(a," ").concat(h[n],", ").concat(t)},requestDate:p,setArticleAge:function(e,t){var n=864e5*t;return p(new Date(Date.parse(e)-n))}};var f=function(e){var t=Object(u.h)().pathname,n="".concat("/"===t?"":"card__button-trash"),c="".concat(e.isMenu&&"/"===t?"card__button-save":"");return Object(a.jsxs)("article",{className:"card",children:[Object(a.jsx)("img",{className:"card__image",alt:"\u0444\u043e\u0442\u043e",src:e.image}),Object(a.jsx)("h2",{className:"card__date",children:e.date}),Object(a.jsx)("h2",{className:"card__title",children:e.title}),Object(a.jsx)("p",{className:"card__paragraph",children:e.paragraph}),Object(a.jsx)("h2",{className:"card__edition",children:e.edition}),Object(a.jsx)("button",{type:"button","aria-label":"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e",className:"card__button ".concat(c,"\n     ").concat(void 0!=e.card?Object.values(e.saveCards).some((function(t){return t.title===e.card.title}))?"card__like-button_marker":"card__button-save-login":"","\n     ").concat(n),onClick:function(t){if(t.preventDefault(),!e.isMenu&&t.target.classList.contains("card__button-save-login")&&e.onAddPlace({keyword:e.keywords[0],title:e.title,text:e.paragraph,date:e.date,source:e.edition,link:e.url,image:e.image}),t.target.classList.contains("card__like-button_marker")){var n=e.saveCards.filter((function(t){return t.title==e.card.title})).slice(0,1)[0];e.handleCardDelete(n)}t.target.classList.contains("card__button-trash")&&e.handleCardDelete(e.saveCards)}}),e.children]})};var v=function(e){var t="".concat(e.cards.length<=e.number\u0421ards?"card__button-invisible":""),n="".concat(e.cards.length<1?"card__button-invisible":"card__resault"),c="".concat(e.cards.length<1||e.isCardSearch?"cards__search_none":"cards__search");return Object(a.jsxs)("section",{className:"".concat(c," card__padding"),children:[Object(a.jsx)("h2",{className:"".concat(n),children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(a.jsx)("div",{className:"cards",children:e.cards.slice(0,e.number\u0421ards).map((function(t,n){if(0!=e.cards.lenght)return Object(a.jsx)(f,{card:t,image:t.urlToImage,title:t.title,date:O.articleDateFormatter(new Date(t.publishedAt)),paragraph:t.description,edition:t.source.name,onAddPlace:e.onAddPlace,keywords:e.keywords,url:t.url,isMenu:e.isMenu,cards:e.card,saveCards:e.saveCards,handleCardDelete:e.handleCardDelete},n)}))}),Object(a.jsx)("button",{type:"button","aria-label":"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435",className:"".concat(t," cards__button "),onClick:e.openAllCards,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"})]})},x=n.p+"static/media/autor.0a21f444.jpg";var N=function(){return Object(a.jsxs)("section",{className:"about",children:[Object(a.jsx)("img",{src:x,className:"about__image",alt:"\u041f\u043e\u0440\u0442\u0440\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0430"}),Object(a.jsxs)("div",{className:"about__info",children:[Object(a.jsx)("h2",{className:"about__title about__title_margin",children:"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"}),Object(a.jsx)("p",{className:"about__subtitle about__subtitle_margin-top",children:"\u042d\u0442\u043e \u0431\u043b\u043e\u043a \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u0417\u0434\u0435\u0441\u044c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c, \u043a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442, \u0447\u0435\u043c \u0432\u044b \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0435\u0441\u044c, \u043a\u0430\u043a\u0438\u043c\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u043c\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u043b\u0430\u0434\u0435\u0435\u0442\u0435."}),Object(a.jsx)("p",{className:"about__subtitle about__subtitle_margin",children:"\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0432 \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435, \u0447\u0435\u043c\u0443 \u0432\u044b \u0442\u0443\u0442 \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c, \u0438 \u0447\u0435\u043c \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043c\u043e\u0447\u044c \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c."})]})]})};var C=function(e){return Object(a.jsxs)("div",{className:"".concat(e.isSpinner," body-preloader"),children:[Object(a.jsx)("i",{className:"circle-preloader"}),Object(a.jsx)("p",{className:"circle-title",children:"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."})]})};var S=function(e){return Object(a.jsx)("section",{className:"no-results ".concat(e.isNoResults),children:Object(a.jsxs)("div",{className:"no-results__elements",children:[Object(a.jsx)("div",{className:"no-results__img"}),Object(a.jsx)("h2",{className:"no-results__header",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(a.jsx)("p",{className:"no-results__paragraph",children:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."})]})})};var w=function(e){return Object(a.jsx)("section",{className:"no-results ".concat(e.isNoServer),children:Object(a.jsxs)("div",{className:"no-results__elements",children:[Object(a.jsx)("div",{className:"no-results__img"}),Object(a.jsx)("h2",{className:"no-results__header",children:"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430."}),Object(a.jsx)("p",{className:"no-results__paragraph",children:" \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})})};var k=function(e){return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsx)(m,{onGetServerCards:e.onGetServerCards,resetCards:function(){e.resetCards()},searchError:e.searchError}),Object(a.jsx)(v,{cards:e.cards,isCardSearch:e.isCardSearch,"number\u0421ards":e.number\u0421ards,openAllCards:function(){e.openThreeCards()},onAddPlace:e.onAddPlace,keywords:e.keywords,isMenu:e.isMenu,saveCards:e.saveCards,handleCardDelete:e.handleCardDelete}),Object(a.jsx)(S,{isNoResults:e.isNoResults}),Object(a.jsx)(w,{isNoServer:e.isNoServer}),Object(a.jsx)(C,{isSpinner:e.isSpinner}),Object(a.jsx)(N,{})]})};var y=function(e){for(var t=e.saveCards.map((function(e){return e.keyword})),n={},c=0;c<t.length;c++)void 0==n[t[c]]?n[t[c]]=1:n[t[c]]++;var s=Object.keys(n).sort((function(e,t){return n[e]-n[t]})).reverse(),o=s.length-2,r="".concat(s.length<4&&s.length>2?s[2]:""),i="".concat(s.length>3?o+" \u0434\u0440\u0443\u0433\u0438\u043c":""),l="".concat(s.length>=3?"\u0438 ":"");return Object(a.jsxs)("section",{className:"saved-news",children:[Object(a.jsx)("h3",{className:"saved-news__info",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(a.jsxs)("h2",{className:"saved-news__lead",children:[e.userData.name,", \u0443 \u0432\u0430\u0441 ",e.saveCards.length," \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0430\u0442\u0435\u0439"]}),Object(a.jsxs)("h3",{className:"saved-news__hashtag",children:["\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:",Object(a.jsxs)("strong",{children:[" ",s[0],", ",s[1]]})," ",l,Object(a.jsxs)("strong",{children:[r," ",i]})]})]})};var E=function(e){return Object(a.jsxs)("section",{className:"new-cards new-cards__item",children:[Object(a.jsx)(y,{saveCards:e.saveCards,keywords:e.keywords,userData:e.userData}),Object(a.jsx)("div",{className:"cards__search cards__padding-top cards__save",children:Object(a.jsx)("div",{className:"cards cards__margin-top ",children:e.saveCards.map((function(t){return Object(a.jsx)(f,{saveCards:t,image:t.image,title:t.title,date:t.date,paragraph:t.text,edition:t.source,handleCardDelete:e.handleCardDelete,saveServer:e.saveCards,children:Object(a.jsx)("div",{className:"card__hashtag",children:t.keyword})},t._id)}))})})]})};var D=function(){return Object(a.jsxs)("footer",{className:"footer",children:[Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Supersite, Powered by News API"}),Object(a.jsxs)("div",{className:"footer__links",children:[Object(a.jsxs)("ul",{className:"footer__list",children:[Object(a.jsx)("li",{children:Object(a.jsx)(j.b,{to:"/",className:"footer__item footer__margin-main",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://praktikum.yandex.ru",className:"footer__item footer__margin-second",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})})]}),Object(a.jsxs)("ul",{className:"social-icons",children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com",className:"menu__github"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://ru-ru.facebook.com",className:"menu__facebook"})})]})]})]})};var M=function(e){return Object(a.jsx)("section",{className:e.isOpen?"".concat(e.width," popup popup_opened"):"popup",onClick:function(t){return function(t){t.target.classList.contains("popup")&&e.onClose()}(t)},children:Object(a.jsxs)("form",{onSubmit:e.onSubmit,className:"popup__container ".concat(e.container),children:[Object(a.jsx)("h2",{className:"popup__title ".concat(e.classTitle),children:e.title}),e.children,Object(a.jsx)("button",{type:"button",className:"popup__close-button ".concat(e.close),"aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose})]})})};var P=function(e){return Object(a.jsx)(M,{isOpen:e.isOpen,onClose:e.onClose,title:"",container:"success",close:"success__button",children:Object(a.jsxs)("div",{className:"success__form",children:[Object(a.jsx)("h3",{className:"success__title",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d!"}),Object(a.jsx)(j.b,{className:"signup__link signup__link_color success__link",to:"/",onClick:e.onEditLogin,children:"\u0412\u043e\u0439\u0442\u0438"})]})})};var A=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],o=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),u=i[0],d=i[1],_=Object(c.useState)(""),b=Object(l.a)(_,2),m=b[0],h=b[1],g=Object(c.useState)(""),p=Object(l.a)(g,2),O=p[0],f=p[1],v=Object(c.useState)(""),x=Object(l.a)(v,2),N=x[0],C=x[1],S=Object(c.useState)(""),w=Object(l.a)(S,2),k=w[0],y=w[1],E=Object(c.useState)(!1),D=Object(l.a)(E,2),P=D[0],A=D[1],L="".concat(!1===P?"login__button_disabled":"");Object(c.useEffect)((function(){e.isOpen||(o(""),d(""),h(""),y(""),C(""),f(""))})),Object(c.useEffect)((function(){A(!(N||k||O||""===s||""===u||""===m))}));var T=function(t){t.preventDefault(),e.onRegister(s,u,m)};return Object(a.jsx)(M,{isOpen:e.isOpen,onClose:e.onClose,title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",container:"popup__container_reg",classTitle:"popup__title_margin",children:Object(a.jsxs)("div",{onSubmit:T,className:"login__form login__form_height",children:[Object(a.jsx)("label",{htmlFor:"Email",children:"Email"}),Object(a.jsx)("input",{className:"login__field login__field_color login__label-margin_bottom",id:"email",name:"email",type:"email",value:s,onChange:function(e){return function(e){o(e.target.value),/[\w-]+@[\w-]+\.[A-Za-z]{2,5}/.test(String(e.target.value).toLocaleLowerCase())?C(""):(C("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"),e.target.value||C("\u041f\u043e\u043b\u0435 email \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e!"))}(e)},required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"}),N&&Object(a.jsx)("div",{className:"regist__mistake-email",children:N}),Object(a.jsx)("span",{className:"login__field-error",children:e.registrationError}),Object(a.jsx)("label",{className:"login__label-margin",htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)("input",{className:"login__field login__field_margin login__field_color",id:"password",name:"password",type:"password",value:u,required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return function(e){d(e.target.value),e.target.value.length<3?(y("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f - 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),e.target.value||y("\u041f\u043e\u043b\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e!")):y("")}(e)}}),k&&Object(a.jsx)("div",{className:"regist__mistake-password",children:k}),Object(a.jsx)("label",{htmlFor:"name",children:"\u0418\u043c\u044f"}),Object(a.jsx)("input",{className:"login__field login__field_margin login__field_color",id:"name",name:"name",type:"text",value:m,onChange:function(e){return function(e){h(e.target.value),e.target.value.length<3?(f("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0438\u043c\u0435\u043d\u0438 - 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),e.target.value||f("\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u0438\u043c\u0435\u043d\u0438 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e!")):f("")}(e)},required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0451 \u0438\u043c\u044f"}),O&&Object(a.jsx)("div",{className:"regist__mistake-name",children:O}),Object(a.jsxs)("div",{className:"login__button-container",children:[Object(a.jsx)("button",{disabled:!P,type:"submit",onClick:T,className:" login__button ".concat(L),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(a.jsxs)("div",{className:"login__signup",children:[Object(a.jsx)("p",{className:"signup__link",children:"\u0438\u043b\u0438"}),Object(a.jsx)(j.b,{className:"signup__link signup__link_color",to:"/",onClick:e.onEditLogin,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})})};var L=function(e){var t=Object(u.h)().pathname;return Object(a.jsxs)(M,{isOpen:e.isOpen,onClose:e.onClose,title:"",container:"menu__form",close:"menu__form_close",width:"popup_close-menu",classTitle:"menu__title",children:[Object(a.jsx)(j.b,{to:"/",className:"header__explorer menu__mobile-header",children:"NewsExplorer"}),Object(a.jsx)("div",{className:"menu__mobile-header-bottom"}),Object(a.jsxs)("div",{className:"menu__mobile-container",children:[Object(a.jsx)(j.b,{to:"/",className:"menu__item_margin menu__mobile-item",onClick:e.onClose,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e.isMenu&&"/saved-news"!==t?Object(a.jsx)("button",{type:"button",className:"menu__button menu__button-mobile","aria-label":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onClick:e.onEditLogin,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.b,{to:"/saved-news",className:"menu__mobile-item menu__mobile-item_top",onClick:e.onClose,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(a.jsx)("button",{type:"button",className:"menu__button menu__button-mobile menu__button-nav","aria-label":"\u0412\u044b\u0439\u0442\u0438",onClick:e.leavePage,children:e.userData.name})]})]})]})};var T=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],o=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),u=i[0],d=i[1],_=Object(c.useState)(""),b=Object(l.a)(_,2),m=b[0],h=b[1],g=Object(c.useState)(""),p=Object(l.a)(g,2),O=p[0],f=p[1],v=Object(c.useState)(!1),x=Object(l.a)(v,2),N=x[0],C=x[1],S="".concat(!1===N?"login__button_disabled":"");return Object(c.useEffect)((function(){e.isOpen||(o(""),d(""),f(""),h(""))})),Object(c.useEffect)((function(){C(!m&&!O&&""!==s&&""!==u)})),Object(a.jsx)(M,{onSubmit:function(t){t.preventDefault(),e.openLogin(s,u)},isOpen:e.isOpen,onClose:e.onClose,name:"register",title:"\u0412\u0445\u043e\u0434",container:"popup__container_reg",classTitle:"popup__title_margin",children:Object(a.jsxs)("div",{className:"login__form login__form_open",children:[Object(a.jsx)("label",{htmlFor:"Email",children:"Email"}),Object(a.jsx)("input",{className:"login__field login__field_color login__label-margin_bottom",id:"email",name:"email",type:"email",value:s,onChange:function(e){return function(e){o(e.target.value),/[\w-]+@[\w-]+\.[A-Za-z]{2,5}/.test(String(e.target.value).toLocaleLowerCase())?h(""):(h("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"),e.target.value||h("\u041f\u043e\u043b\u0435 email \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e!"))}(e)},required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"}),m&&Object(a.jsx)("div",{className:"login__mistake-email",children:m}),Object(a.jsx)("label",{className:"login__label-margin",htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)("input",{className:"login__field login__field_margin login__field_color",id:"password",name:"password",type:"password",value:u,required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return function(e){d(e.target.value),e.target.value.length<3?(f("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f - 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),e.target.value||f("\u041f\u043e\u043b\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e!")):f("")}(e)}}),O&&Object(a.jsx)("div",{className:"login__mistake-password",children:O}),Object(a.jsx)("span",{className:"login__field-error_top",children:e.loginError}),Object(a.jsxs)("div",{className:"login__button-container",children:[Object(a.jsx)("button",{disabled:!N,type:"submit",className:"login__button ".concat(S),children:"\u0412\u043e\u0439\u0442\u0438"}),Object(a.jsxs)("div",{className:"login__signup",children:[Object(a.jsx)("p",{className:"signup__link",children:"\u0438\u043b\u0438"}),Object(a.jsx)(j.b,{className:"signup__link signup__link_color",to:"/",onClick:e.onEditReg,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})]})})},I=n(22),F=n(23),R=new(function(){function e(t){var n=t.NEWS_SERVER,a=t.API_KEY,c=t.PAGE_SIZE;Object(I.a)(this,e),this.server=n,this.apiKey=a,this.pageSize=c}return Object(F.a)(e,[{key:"getNews",value:function(e,t,n){return fetch("".concat(this.server,"?q=").concat(encodeURI(e),"&from=").concat(t,"&to=").concat(n,"&pageSize=").concat(this.pageSize,"&apiKey=").concat(this.apiKey)).then((function(e){return e.ok?e.json():Promise.reject(new Error("(\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status,")")))})).catch((function(e){return console.log(e)}))}}]),e}())({NEWS_SERVER:"https://nomoreparties.co/news/v2/everything",API_KEY:"efbba08663274baa9e79d538451dc327",PAGE_SIZE:100}),z=n(13),B=n(24),q=n(25),J=function(e){var t=e.component,n=Object(q.a)(e,["component"]);return Object(a.jsx)(u.b,{children:function(){return n.isMenu?Object(a.jsx)(u.a,{to:"/"}):Object(a.jsx)(t,Object(B.a)({},n))}})};var G=function(){var e=new Date,t=O.setArticleAge(e,7),n=O.requestDate(e),c=s.a.useState(!1),o=Object(l.a)(c,2),r=o[0],j=o[1],_=s.a.useState(!1),m=Object(l.a)(_,2),h=m[0],p=m[1],f=s.a.useState(!1),v=Object(l.a)(f,2),x=v[0],N=v[1],C=s.a.useState(!1),S=Object(l.a)(C,2),w=S[0],y=S[1],M=s.a.useState(!0),I=Object(l.a)(M,2),F=I[0],B=I[1],q=s.a.useState(""),G=Object(l.a)(q,2),K=G[0],Y=G[1],Z=s.a.useState(""),V=Object(l.a)(Z,2),W=V[0],U=V[1],H=s.a.useState(""),Q=Object(l.a)(H,2),X=Q[0],$=Q[1],ee=s.a.useState([]),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=s.a.useState([]),se=Object(l.a)(ce,2),oe=se[0],re=se[1],ie=s.a.useState(!0),le=Object(l.a)(ie,2),ue=le[0],de=le[1],je=s.a.useState(!1),_e=Object(l.a)(je,2),be=_e[0],me=_e[1],he=s.a.useState({}),ge=Object(l.a)(he,2),pe=ge[0],Oe=ge[1],fe=s.a.useState([]),ve=Object(l.a)(fe,2),xe=ve[0],Ne=ve[1],Ce=s.a.useState(3),Se=Object(l.a)(Ce,2),we=Se[0],ke=Se[1],ye=s.a.useState(""),Ee=Object(l.a)(ye,2),De=Ee[0],Me=Ee[1],Pe=s.a.useState(""),Ae=Object(l.a)(Pe,2),Le=Ae[0],Te=Ae[1],Ie=s.a.useState(""),Fe=Object(l.a)(Ie,2),Re=Fe[0],ze=Fe[1],Be=Object(u.g)(),qe=localStorage.getItem("jwt");function Je(e){Y(e?"body-preloader_block":"")}function Ge(){j(!1),N(!1),p(!1),y(!1),B(!0),Te(""),ze("")}function Ke(){j(!1),N(!0),p(!1),de(!0)}function Ye(){var e;localStorage.getItem("jwt")&&(e=qe,fetch("".concat(g,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){console.log(e.message)}))})).then((function(e){return e})).catch((function(e){return console.log(e)}))).then((function(e){e&&(Oe({_id:e._id,name:e.name,email:e.email}),de(!1),Be.push("/"))})).catch((function(e){return console.log(e)}))}function Ze(){de(!0),Oe(""),localStorage.removeItem("jwt"),localStorage.removeItem("cards"),Be.push("/")}function Ve(e){var t,n;(t=qe,n="/".concat(e._id),fetch("".concat(g,"/articles/").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.ok?e.json():Promise.reject(e.message)})).catch((function(e){return console.log(e)}))).then((function(){var t=oe.filter((function(t){return t._id!==e._id}));re(t)})).catch((function(e){return console.log(e)}))}return s.a.useEffect((function(){window.addEventListener("keydown",(function(e){"Escape"===e.key&&Ge()}))}),[]),s.a.useEffect((function(){Ye()}),[!ue]),s.a.useEffect((function(){null!=JSON.parse(localStorage.getItem("cards"))&&ae(JSON.parse(localStorage.getItem("cards")))}),[]),s.a.useEffect((function(){var e;ue||(e=qe,fetch("".concat(g,"/articles"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():Promise.reject(e.message)})).catch((function(e){return console.log(e)}))).then((function(e){re(e)})).catch((function(e){return console.log(e)}))}),[!ue]),Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(d.Provider,{value:pe,children:[Object(a.jsx)(b,{onOpenMenuMobile:function(){y(!0)},isMenu:ue,onEditReg:function(){j(!0),y(!1),B(!1)},onEditLogin:Ke,isMenuCloseBtn:F,userData:pe,leavePage:Ze}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",children:Object(a.jsx)(k,{onGetServerCards:function(e){""===e?Me("\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"):(me(!0),U(""),$(""),Je(!0),Me(""),R.getNews(e,t,n).then((function(t){0===t.articles.length?U("no-results_block"):(me(!1),Ne([e].concat(Object(i.a)(xe))),localStorage.setItem("cards",JSON.stringify(t.articles)),ae(JSON.parse(localStorage.getItem("cards"))))})).catch((function(e){console.log(e),$("no-results_block")})).finally((function(){Je(!1)})))},isSpinner:K,cards:ne,isNoResults:W,isCardSearch:be,onAddPlace:function(e){(function(e,t){return fetch("".concat(g,"/articles"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({keyword:"".concat(e.keyword),title:"".concat(e.title),text:"".concat(e.text),date:"".concat(e.date),source:"".concat(e.source),link:"".concat(e.link),image:"".concat(e.image)})}).then((function(e){return e.ok?e.json():e.json().then((function(e){console.log(e.message)}))})).then((function(e){return e})).catch((function(e){return console.log(e)}))})(e,qe).then((function(e){re([e.data].concat(Object(i.a)(oe)))})).catch((function(e){return console.log(e)}))},keywords:xe,isMenu:ue,"number\u0421ards":we,openThreeCards:function(){ke(we+3)},resetCards:function(){ke(3)},saveCards:oe,handleCardDelete:Ve,searchError:De,isNoServer:X})}),Object(a.jsx)(J,{exact:!0,path:"/saved-news",component:E,isMenu:ue,saveCards:oe,keywords:xe,userData:pe,handleCardDelete:Ve})]}),Object(a.jsx)(L,{isOpen:w,onClose:Ge,onEditLogin:Ke,isMenu:ue,leavePage:Ze,userData:pe}),Object(a.jsx)(A,{registrationError:Le,onRegister:function(e,t,n){(function(e,t,n){return fetch("".concat(g,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){if(400!==e.status)return e.json();throw new Error("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439")})).catch((function(e){return console.log(e)}))})(e,t,n).then((function(e){e?(p(!0),j(!1),Be.push("/")):(Te("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"))})).catch((function(e){return console.log(e)}))},onEditLogin:Ke,isOpen:r,onClose:Ge}),Object(a.jsx)(P,{isOpen:h,onClose:Ge,onEditLogin:Ke}),Object(a.jsx)(T,{loginError:Re,isOpen:x,onClose:Ge,openLogin:function(e,t){(function(e,t){return fetch("".concat(g,"/signin"),{method:"POST",headers:Object(z.a)({"Content-Type":"application/json"},"Content-Type","application/json"),body:JSON.stringify({email:e,password:t})}).then((function(e){try{if(200===e.status)return e.json();if(400===e.status)return console.log("\u041e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e");if(401===e.status)return console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u043d\u0435  \u043d\u0430\u0439\u0434\u0435\u043d")}catch(t){return t}})).then((function(e){if(e)return localStorage.setItem("jwt",e.token),e.token})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){return e?e?(de(!1),N(!1),B(!0),void Be.push("/")):void 0:(ze("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),ze(e.message),console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"))})).catch((function(e){return console.log(e)}))},onEditReg:function(){j(!0),N(!1)}}),Object(a.jsx)(D,{})]})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(j.a,{children:Object(a.jsx)(G,{})})}),document.getElementById("root")),K()}},[[37,1,2]]]);
//# sourceMappingURL=main.4811be5b.chunk.js.map